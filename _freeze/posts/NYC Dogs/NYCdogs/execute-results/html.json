{
  "hash": "ed8c6330571ec8c73e82a6a3d0fb7828",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"NYC Dogs\"\nauthor: \"Owen Ellick\"\ndate: \"2025-03-31\"\ncategories: [Data Analysis]\nimage: \"pitbull.png\"\nexecute: \n  warning: false\n  message: false\n\ntoc: true\n---\n\n\n## ![](pitbull.png)\n\n# NYC Dogs\n\n## Load Necessary Libraries\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(ggtext)\nlibrary(ggthemes)\nlibrary(ggplot2)\nlibrary(viridis)\n```\n:::\n\n\n## Loading The Data\n\n::: {.cell}\n\n```{.r .cell-code}\nnyc_dog_license <- read_csv(\n  'https://bcdanl.github.io/data/nyc_dog_license.csv')\nprint(nyc_dog_license)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 222,328 × 9\n   animal_name animal_gender animal_birth_year breed_rc         borough zip_code\n   <chr>       <chr>                     <dbl> <chr>            <chr>      <dbl>\n 1 Paige       F                          2014 Pit Bull (or Mi… Manhat…    10035\n 2 Lola        F                          2009 Maltese          Manhat…    10028\n 3 Chewbacca   F                          2012 Labrador (or Cr… Manhat…    10013\n 4 Lemmy       F                          2005 Yorkshire Terri… Manhat…    10003\n 5 Ricky       M                          2014 German Shepherd… Brookl…    11220\n 6 Murphy      M                          2012 Pit Bull (or Mi… Bronx      10463\n 7 Avery       F                          2014 Pit Bull (or Mi… Manhat…    10002\n 8 Bigs        M                          2004 Pit Bull (or Mi… Brookl…    11208\n 9 Bess        F                          2010 Beagle           Brookl…    11218\n10 Apple       M                          2013 Havanese         Manhat…    10025\n# ℹ 222,318 more rows\n# ℹ 3 more variables: license_issued_date <date>, license_expired_date <date>,\n#   extract_year <dbl>\n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nnyc_zips_coord <- read_csv(\n  'https://bcdanl.github.io/data/nyc_zips_coord.csv')\nprint(nyc_zips_coord)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 11,175 × 3\n       X     Y objectid\n   <dbl> <dbl>    <dbl>\n 1 -73.9  40.7        1\n 2 -73.9  40.7        1\n 3 -73.9  40.7        1\n 4 -73.9  40.7        1\n 5 -73.9  40.7        1\n 6 -73.9  40.8        1\n 7 -73.9  40.8        1\n 8 -73.9  40.8        1\n 9 -73.9  40.8        1\n10 -73.9  40.8        1\n# ℹ 11,165 more rows\n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nnyc_zips_df <- read_csv(\n  'https://bcdanl.github.io/data/nyc_zips_df.csv')\nprint(nyc_zips_df)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 262 × 11\n   objectid zip_code po_name     state borough st_fips cty_fips bld_gpostal_code\n      <dbl>    <dbl> <chr>       <chr> <chr>     <dbl> <chr>               <dbl>\n 1        1    11372 Jackson He… NY    Queens       36 081                     0\n 2        2    11004 Glen Oaks   NY    Queens       36 081                     0\n 3        3    11040 New Hyde P… NY    Queens       36 081                     0\n 4        4    11426 Bellerose   NY    Queens       36 081                     0\n 5        5    11365 Fresh Mead… NY    Queens       36 081                     0\n 6        6    11373 Elmhurst    NY    Queens       36 081                     0\n 7        7    11001 Floral Park NY    Queens       36 081                     0\n 8        8    11375 Forest Hil… NY    Queens       36 081                     0\n 9        9    11427 Queens Vil… NY    Queens       36 081                     0\n10       10    11374 Rego Park   NY    Queens       36 081                     0\n# ℹ 252 more rows\n# ℹ 3 more variables: shape_leng <dbl>, shape_area <dbl>, x_id <chr>\n```\n\n\n:::\n:::\n\n## Important Visualization\n\n\n::: {.cell}\n\n```{.r .cell-code}\nnyc_dog_license_cleaned <- nyc_dog_license %>%\n  filter(!is.na(breed_rc))\n\npit_bull_proportion <- nyc_dog_license_cleaned %>%\n  group_by(zip_code) %>%\n  summarise(\n    total_dogs = n(),\n    pitbull_dogs = sum(breed_rc == \"Pit Bull (or Mix)\"),\n    pitbull_proportion = (pitbull_dogs / total_dogs) * 100\n  )\n\nmerged_data <- nyc_zips_df %>%\n  left_join(pit_bull_proportion, by = \"zip_code\") %>%\n  left_join(nyc_zips_coord, by = \"objectid\")\n\nx_percentile <- quantile(merged_data$X, 0.075, na.rm = TRUE)\ny_percentile <- quantile(merged_data$Y, 0.60, na.rm = TRUE)\n\nggplot(merged_data, aes(x = X, y = Y, fill = pitbull_proportion)) +\n  annotate(\"richtext\",\n           x = x_percentile,  \n           y = y_percentile,  \n           label = \"<img src='https://bcdanl.github.io/lec_figs/pitbull.png' width='750'/>\",\n           fill = NA,\n           color = NA,\n           ) +\n  geom_polygon(aes(group = zip_code), color = \"black\", size = 0.1) +\n  scale_fill_viridis(name = \"Percent of All Licensed Pit Bull\", option = \"magma\", direction = 1, breaks = c(2.5, 5, 7.5, 10, 12.5, 15, 17.5, 20, 22.5), limits = c(0,22.5),\n                     na.value = \"transparent\") +\n  coord_map(projection = \"albers\", lat0 = 39, lat1 = 45) +\n  labs(title = \"New York City's Pit Bull\", subtitle = \"By Zip Code. Based on Licensing Data\") +\n  theme_void() +\n  guides(fill = guide_legend(barwidth = 2.5, nrow = 1, label.position = \"bottom\")) +\n  theme(plot.title = element_text(hjust = 0.5, face = \"bold\", size = 20),\n        plot.subtitle = element_text(hjust = 0.5), size = 14,\n        legend.position = \"top\",\n        legend.justification = c(0.2,1),\n        legend.key.width = unit(2, \"cm\"),\n        legend.title.position = \"top\")\n```\n\n::: {.cell-output-display}\n![](NYCdogs_files/figure-html/unnamed-chunk-5-1.png){width=593.28}\n:::\n:::\n\n\n- Geographic Distribution: The map highlights variations in Licensed Pit Bull ownership across different zip codes. Darker areas indicate a lower percentage of licensed Pit Bulls, while lighter areas suggest a higher percentage.\n\n## Follow Up Question\n- Which Zip Code has the highest proportion of Pit Bull (or Mix)?\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmax_proportion <- max(pit_bull_proportion$pitbull_proportion, na.rm = TRUE)\n\nhighest_proportion_zips <- pit_bull_proportion %>%\n  filter(pitbull_proportion == max_proportion)\n\nprint(highest_proportion_zips)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 22 × 4\n   zip_code total_dogs pitbull_dogs pitbull_proportion\n      <dbl>      <int>        <int>              <dbl>\n 1     1009          2            2                100\n 2     7065          1            1                100\n 3     8527          1            1                100\n 4     8721          2            2                100\n 5    10520          2            2                100\n 6    10536          1            1                100\n 7    11381          2            2                100\n 8    12010          1            1                100\n 9    12775          2            2                100\n10    13032          1            1                100\n# ℹ 12 more rows\n```\n\n\n:::\n:::\n\n- There are 22 zip codes that all are tied for the highest proportion of Pit Bull (or Mix), the zip code that is shown at the top is 1009.\n",
    "supporting": [
      "NYCdogs_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}